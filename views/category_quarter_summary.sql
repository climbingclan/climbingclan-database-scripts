CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`%` SQL SECURITY DEFINER VIEW `category_quarter_summary` AS select `all_quarters`.`year` AS `year`,`all_quarters`.`quarter` AS `quarter`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Back Office Supplies' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Back Office Supplies`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Balance Transfer' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Balance Transfer`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Bank Fees' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Bank Fees`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'BMC Membership Fees' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `BMC Membership Fees`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Cake' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Cake`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Cards' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Cards`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Direct Debit' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Direct Debit`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Equipment' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Equipment`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Facebook Advertising' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Facebook Advertising`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'General Expenses' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `General Expenses`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Grants' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Grants`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Inbound BACS Payment' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Inbound BACS Payment`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Loan Repayment' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Loan Repayment`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Mugs' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Mugs`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Outbound BACS Payment' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Outbound BACS Payment`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Overnight Accomodation' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Overnight Accomodation`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Overnight Activities' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Overnight Activities`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Overnight Food' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Overnight Food`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Overnight Transport' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Overnight Transport`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Payment from Customer' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Payment from Customer`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Period Club' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Period Club`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Refund' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Refund`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Social Activity Provider' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Social Activity Provider`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Social Media' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Social Media`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Thinking Digital Conference' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Thinking Digital Conference`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Training Provider' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Training Provider`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Web Infrastructure' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Web Infrastructure`,coalesce(sum(case when `wp_member_accounts_with_quarters`.`payment_category` = 'Wednesday Night Supplies' then `wp_member_accounts_with_quarters`.`net` else 0 end),0) AS `Wednesday Night Supplies` from (`all_quarters` left join `wp_member_accounts_with_quarters` on(`all_quarters`.`year` = `wp_member_accounts_with_quarters`.`year` and `all_quarters`.`quarter` = `wp_member_accounts_with_quarters`.`quarter`)) group by `all_quarters`.`year`,`all_quarters`.`quarter`